<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order List</title>
  </head>
  <body>
    <h1>Order List</h1>
    <div id="order-list"></div>

    <script>
      // Function to fetch all items from the backend and display them
      fetch("http://localhost:5001/items")
        .then((response) => response.json())
        .then((data) => {
          console.log(data); // Log the fetched data to verify
          const orderListEl = document.getElementById("order-list");

          if (data.length > 0) {
            // Loop through the items and display each one
            data.forEach((item) => {
              console.log(item); // Log each item to ensure it's structured as expected
              const orderDiv = document.createElement("div");
              orderDiv.style.marginBottom = "20px"; // Style to separate orders
              orderDiv.innerHTML = `
                <h3>Order Number: ${item.OrderNumber}</h3>
                <p><strong>Date:</strong> ${item.Date}</p>
                <p><strong>Content:</strong> ${item.OrderContent}</p>
                <p><strong>Puller:</strong> ${item.OrderPuller}</p>
                <p><strong>Status:</strong> ${item.OrderStatus}</p>
                <p><strong>Checker:</strong> ${item.OrderChecker}</p>
                ${
                  item.mistakeType
                    ? `<p><strong>Mistake Type:</strong> ${item.mistakeType}</p>`
                    : ""
                }
                <hr />
              `;
              orderListEl.appendChild(orderDiv);
            });
          } else {
            orderListEl.innerHTML = "<p>No orders available.</p>";
          }
        })
        .catch((error) => {
          console.error("Error fetching items:", error);
        });
    </script>
  </body>
</html>
